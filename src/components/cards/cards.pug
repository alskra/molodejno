include ../card-item/card-item
include ../person-item/person-item
include ../pagination/pagination

mixin cards({type, slice, tags = true, columns = 3} = {})
	include data

	-
		let items = data(type, slice, tags);

	.cards(x-data="{gridEl: $root.querySelector('.cards__grid')}")&attributes(attributes)
		if slice
			.cards__main
				.cards__main-inner(
					x-data="swiperCards"
					x-effect="effect"
					x-bind:class="{swiper: !$store.isDesktop}"
					x-ref="swiper"
				)
					.cards__grid(
						class=`cards__grid--columns-${columns}`
						x-bind:class="{'swiper-wrapper': !$store.isDesktop}"
					)
						each item in items
							if type !== 'persons'
								+card-item(item).cards__item(
									class=`card-item--style-group-${columns * 2}`
									x-bind:class="{'swiper-slide': !$store.isDesktop}"
								)
							else
								+person-item(item).cards__item(
									x-bind:class="{'swiper-slide': !$store.isDesktop}"
								)

			if type === 'recipients' || type === 'persons'
				+pagination({multipage: false}).hidden-lg-down(x-data=`pagination('ajax/${type}-slice.html', gridEl)`)
		else
			.cards__grid(class=`cards__grid--columns-${columns}`)
				each item in items
					+card-item(item).cards__item(class=`card-item--style-group-${columns * 2}`)

			+pagination()(x-data=`pagination('ajax/${type}.html', gridEl)`)
